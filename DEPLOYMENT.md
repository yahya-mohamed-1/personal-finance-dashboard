# 🚀 Deployment Guide

This guide will help you deploy your Personal Finance Dashboard to Vercel (frontend) and Render (backend).

## 📋 Prerequisites

- GitHub account
- Vercel account
- Render account
- Your application code pushed to GitHub

## 🎯 Frontend Deployment (Vercel)

### Step 1: Prepare Your Code
1. Make sure your code is pushed to GitHub
2. Update `src/api-config.js` with your Render backend URL after deployment

### Step 2: Deploy to Vercel
1. Go to [vercel.com](https://vercel.com) and sign in
2. Click "New Project"
3. Import your GitHub repository
4. Configure your project:
   - **Framework Preset**: Vite
   - **Root Directory**: `./` (leave as default)
   - **Build Command**: `npm run build`
   - **Output Directory**: `dist`
5. Add environment variables (if needed):
   - `VITE_API_URL`: Your Render backend URL (e.g., `https://your-backend-app.onrender.com/api`)
6. Click "Deploy"

### Step 3: Update API Configuration
After deployment, update the API URL in your code:
```javascript
// In production, use the deployed backend URL
if (import.meta.env.PROD) {
  return "https://your-actual-backend-app.onrender.com/api";
}
```

## 🔧 Backend Deployment (Render)

### Step 1: Prepare Your Code
1. Make sure your code is pushed to GitHub
2. Update `render.yaml` with your actual service names
3. Update `backend/config_prod.py` with your frontend URL

### Step 2: Deploy to Render
1. Go to [render.com](https://render.com) and sign in
2. Click "New" → "Blueprint"
3. Connect your GitHub repository
4. Configure your service:
   - **Name**: `personal-finance-backend` (or your preferred name)
   - **Environment**: Python
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `python manage.py`

### Step 3: Set Environment Variables
Add these environment variables in Render dashboard:
- `FLASK_ENV`: `production`
- `SECRET_KEY`: (generate a secure random key)
- `JWT_SECRET_KEY`: (generate a secure random key)
- `DATABASE_URL`: (will be auto-generated by Render)
- `FRONTEND_URL`: Your Vercel frontend URL

### Step 4: Database Setup
1. Render will automatically create a PostgreSQL database
2. Run database migrations:
   ```bash
   python manage.py db upgrade
   ```

## 🔄 Update Configuration Files

### 1. Update vercel.json
Replace `your-backend-app.onrender.com` with your actual Render service URL:

```json
{
  "rewrites": [
    {
      "source": "/api/(.*)",
      "destination": "https://your-actual-backend-app.onrender.com/api/$1"
    }
  ]
}
```

### 2. Update API Configuration
Update `src/api-config.js` with your actual URLs:

```javascript
const getBaseURL = () => {
  if (import.meta.env.PROD) {
    return "https://your-actual-backend-app.onrender.com/api";
  }
  return "http://127.0.0.1:5000/api";
};
```

### 3. Update Production Config
Update `backend/config_prod.py` with your actual frontend URL:

```python
FRONTEND_URL = os.getenv("FRONTEND_URL", "https://your-actual-frontend-app.vercel.app")
```

## 🌐 Domain Configuration

### Custom Domains (Optional)
1. **Vercel**: Add your custom domain in project settings
2. **Render**: Add your custom domain in service settings
3. Update CORS settings in `backend/app.py` to allow your custom domain

## 🔒 Security Considerations

1. **Environment Variables**: Never commit secrets to version control
2. **CORS**: Configure allowed origins properly in production
3. **HTTPS**: Ensure all communications use HTTPS
4. **Database**: Use strong passwords and connection strings

## 🧪 Testing Your Deployment

1. **Frontend**: Visit your Vercel URL
2. **Backend**: Test API endpoints using your Render URL
3. **Database**: Verify database connections and migrations
4. **Authentication**: Test login/register functionality
5. **CORS**: Ensure frontend can communicate with backend

## 📊 Monitoring

- **Vercel**: Use Vercel Analytics for frontend monitoring
- **Render**: Use Render Logs for backend monitoring
- **Database**: Monitor PostgreSQL performance on Render

## 🔄 Continuous Deployment

Both platforms support automatic deployments:
- **Vercel**: Deploys on every push to main branch
- **Render**: Deploys on every push to main branch (if auto-deploy is enabled)

## 🆘 Troubleshooting

### Common Issues:
1. **CORS Errors**: Update CORS configuration in `backend/app.py`
2. **Database Connection**: Check DATABASE_URL environment variable
3. **Build Failures**: Check build logs in respective platforms
4. **API 404s**: Verify API routes and URL configurations

### Getting Help:
- Check platform-specific documentation
- Review application logs
- Test locally before deploying

## 📞 Support

- **Vercel**: [vercel.com/support](https://vercel.com/support)
- **Render**: [render.com/support](https://render.com/support)
- **GitHub Issues**: Create issues for code-specific problems

---

Happy deploying! 🎉
